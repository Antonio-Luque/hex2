<!DOCTYPE html>
<html>
<head>
<title>Hex2: Routine at 6E00</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Hex2</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="28148.html">6DF4</a>
</td>
<td class="up">Up: <a href="../maps/all.html#28160">Map</a></td>
<td class="next">
Next: <a href="28175.html">6E0F</a>
</td>
</tr>
</table>
<div class="description">6E00: Move Down one Pixel-Line</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="28129.html">Draw_Sprite_Hexagon</a>, <a href="28148.html">Draw_Sprite_LetterNum</a> and <a href="30662.html">Screen_Vertical_Bars</a>.
</div>
<div class="paragraph">
Move <span class="register">HL</span> down one pixel-line.
</div>
<div class="paragraph">
The screen address of a pixel-line is encoded as follows:
</div>
<div class="paragraph">
<table class="default">
<tr>
<td class="centre transparent" colspan="1" rowspan="1"></td>
<th colspan="8" rowspan="1">H</th>
<th colspan="8" rowspan="1">L</th>
</tr>
<tr>
<th colspan="1" rowspan="1">Bit</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;7&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;6&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;5&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;4&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;3&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;2&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;1&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;0&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;7&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;6&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;5&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;4&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;3&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;2&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;1&nbsp;&nbsp;</th>
<th colspan="1" rowspan="1">&nbsp;&nbsp;0&nbsp;&nbsp;</th>
</tr>
<tr>
<th colspan="1" rowspan="1">Value</th>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">0</th>
<td class="centre" colspan="1" rowspan="1">Y7</td>
<td class="centre" colspan="1" rowspan="1">Y6</td>
<td class="centre" colspan="1" rowspan="1">Y2</td>
<td class="centre" colspan="1" rowspan="1">Y1</td>
<td class="centre" colspan="1" rowspan="1">Y0</td>
<td class="centre" colspan="1" rowspan="1">Y5</td>
<td class="centre" colspan="1" rowspan="1">Y4</td>
<td class="centre" colspan="1" rowspan="1">Y3</td>
<td class="centre" colspan="1" rowspan="1">X4</td>
<td class="centre" colspan="1" rowspan="1">X3</td>
<td class="centre" colspan="1" rowspan="1">X2</td>
<td class="centre" colspan="1" rowspan="1">X1</td>
<td class="centre" colspan="1" rowspan="1">X0</td>
</tr>
</table>
</div>
<div class="paragraph">
Where:
</div>
<div class="paragraph">
<ul class="">
<li>Y = Pixel position: Y7, Y6, Y5, Y4, Y3, Y2, Y1, Y0 (0-191)</li>
<li>X = Byte  position: 0, 0, 0, X4, X3, X2, X1, X0 (0-31)</li>
</ul>
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">HL</td>
<td class="register-desc">Pixel-line address</td>
</tr>
</table>
<table class="output">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>
<tr>
<td class="register">HL</td>
<td class="register-desc">Next (down) pixel-line address</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="asm-label">Draw_Down_PixelLine</td>
<td class="address-2"><span id="28160"></span>6E00</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">move <span class="register">HL</span> down one pixel-line</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28161"></span>6E01</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1">get high byte of pixel-line address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28162"></span>6E02</td>
<td class="instruction">AND $07</td>
<td class="comment-1" rowspan="1">is pixel-line address inside a character line?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28164"></span>6E04</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1">yes, return</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28165"></span>6E05</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="1">get low byte of pixel-line address (at this point Y6 = 1)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28166"></span>6E06</td>
<td class="instruction">ADD A,$20</td>
<td class="comment-1" rowspan="1">add size of char line (add extra bit into Y3-Y5)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28168"></span>6E08</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1">move <span class="register">HL</span> down one character line</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28169"></span>6E09</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1">a third was crossed? yes, return</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28170"></span>6E0A</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1">get high byte of pixel-line address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28171"></span>6E0B</td>
<td class="instruction">SUB $08</td>
<td class="comment-1" rowspan="1">clean up the bit from Y6</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28173"></span>6E0D</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span> points to next (down) pixel-line address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28174"></span>6E0E</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="28148.html">6DF4</a>
</td>
<td class="up">Up: <a href="../maps/all.html#28160">Map</a></td>
<td class="next">
Next: <a href="28175.html">6E0F</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">By Antonio Luque (2023).</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
</footer>
</body>
</html>